:root {
  --yellow: #FFD90F;
  --blue: #4A90E2;
  --dark: #222;
  --card: #fff6c9;
  --red: #E53935;
  --green: #2ecc71;
}
* { box-sizing: border-box; }
body {
  margin: 0;
  padding: 10px;
  font-family: "Luckiest Guy", system-ui, sans-serif;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  color: #fff;
  text-align: center;
  min-height: 100vh;
}
h1 {
  font-size: 32px;
  margin: 10px 0;
  text-shadow: 2px 2px 0 #000;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}
.cat-icon {
  width: 40px;
  height: 40px;
  display: inline-block;
  position: relative;
  top: -0.3em;
}
.main-card {
  background: rgba(255,255,255,0.1);
  border-radius: 20px;
  padding: 15px;
  max-width: 800px;
  margin: 0 auto;
  border: 3px solid rgba(255,255,255,0.2);
}
.video-wrapper {
  position: relative;
  display: inline-block;
  width: 100%;
  max-width: 640px;
}
#videoStream {
  width: 100%;
  border-radius: 10px;
  border: 3px solid #000;
  background: #000;
}
.crosshair-canvas {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  border-radius: 10px;
  pointer-events: none;
}
.camera-row {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 6px;
}
.actions-bar {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 16px;
  flex-wrap: wrap;
  margin: 12px 0 4px;
}
.alert-group {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}
/* Telegram credentials — fixed bottom-left corner, intentionally invisible */
.tg-cfg {
  position: fixed;
  bottom: 10px;
  left: 10px;
  display: flex;
  flex-direction: column;
  gap: 3px;
  z-index: 10;
}
.tg-cfg input {
  font-family: monospace;
  font-size: 10px;
  padding: 3px 5px;
  border-radius: 4px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.04);
  color: #555;
  width: 160px;
  outline: none;
  transition: color 0.2s, border-color 0.2s, background 0.2s;
}
.tg-cfg input::placeholder { color: #444; }
.tg-cfg input:focus {
  color: #aaa;
  border-color: rgba(255,255,255,0.25);
  background: rgba(255,255,255,0.10);
}
.arrow-pad {
  display: grid;
  grid-template-columns: repeat(3, 50px);
  grid-template-rows: repeat(3, 50px);
  gap: 5px;
  justify-content: center;
}
select {
  font-family: "Luckiest Guy", system-ui, sans-serif;
  font-size: 14px;
  padding: 8px;
  border-radius: 10px;
  border: 3px solid #000;
  background: white;
  cursor: pointer;
}
button {
  font-family: "Luckiest Guy", system-ui, sans-serif;
  font-size: 16px;
  padding: 10px 16px;
  border-radius: 12px;
  border: 3px solid #000;
  cursor: pointer;
  box-shadow: 0 3px 0 #000;
  transition: transform 0.05s ease;
}
button:active { transform: translateY(3px); box-shadow: 0 0 0 #000; }
button.blue { background: var(--blue); color: white; }
button.green { background: var(--green); color: #000; }
button.red { background: var(--red); color: white; }
button:disabled { opacity: 0.5; cursor: not-allowed; }

.hidden { display: none !important; }
.alert-btn {
  background: #555;
  color: #aaa;
  font-size: 15px;
  padding: 12px 18px;
  border-radius: 14px;
  border: 3px solid #000;
  cursor: pointer;
  box-shadow: 0 4px 0 #000;
  transition: background 0.2s, color 0.2s, transform 0.05s;
}
.alert-btn:active { transform: translateY(4px); box-shadow: 0 0 0 #000; }
.alert-btn.alerting {
  background: #e53935;
  color: #fff;
  animation: alert-pulse 1.2s ease-in-out infinite;
}
@keyframes alert-pulse {
  0%, 100% { box-shadow: 0 4px 0 #000, 0 0 0px rgba(229,57,53,0); }
  50%       { box-shadow: 0 4px 0 #000, 0 0 16px rgba(229,57,53,0.8); }
}

/* ---- D-pad + FIRE ---- */
.controls-row {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 32px;
  margin: 14px 0 6px;
  flex-wrap: wrap;
}
.dpad {
  display: grid;
  grid-template-columns: repeat(3, 52px);
  grid-template-rows: repeat(3, 52px);
  gap: 4px;
}
.dpad-btn {
  width: 52px;
  height: 52px;
  font-size: 22px;
  padding: 0;
  border-radius: 10px;
  border: 3px solid #000;
  cursor: pointer;
  box-shadow: 0 4px 0 #000;
  transition: transform 0.05s ease;
  background: #4A90E2;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
}
.dpad-btn:active { transform: translateY(4px); box-shadow: 0 0 0 #000; }
.dpad-btn.center-btn {
  background: #2ecc71;
  border-color: #000;
  color: #fff;
  cursor: pointer;
  font-size: 20px;
}
.dpad-btn.center-btn:active { transform: translateY(4px); box-shadow: 0 0 0 #000; }
.dpad-empty { width: 52px; height: 52px; }

/* Aircraft FIRE button */
.fire-wrap {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 18px;
}
.fire-col {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}
.fire-guard {
  position: relative;
  width: 84px;
  height: 84px;
}
/* Safety guard arc */
.fire-guard::before {
  content: "";
  position: absolute;
  inset: -8px;
  border-radius: 50%;
  border: 5px solid #ff9800;
  border-bottom-color: transparent;
  border-left-color: transparent;
  transform: rotate(-45deg);
  pointer-events: none;
  box-shadow: 0 0 8px rgba(255,152,0,0.6);
}
.fire-btn {
  width: 84px;
  height: 84px;
  border-radius: 50%;
  background: radial-gradient(circle at 35% 35%, #ff5252, #b71c1c);
  border: 4px solid #000;
  color: #fff;
  font-family: "Luckiest Guy", system-ui, sans-serif;
  font-size: 13px;
  letter-spacing: 1px;
  cursor: pointer;
  padding: 0;
  box-shadow: 0 6px 0 #7f0000, 0 0 20px rgba(255,82,82,0.5);
  transition: transform 0.05s ease, box-shadow 0.05s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  line-height: 1.1;
}
.fire-btn:active {
  transform: translateY(6px);
  box-shadow: 0 0 0 #7f0000, 0 0 28px rgba(255,82,82,0.9);
}
.fire-label {
  font-size: 10px;
  color: #ff9800;
  letter-spacing: 2px;
  text-transform: uppercase;
}
.fire-btn:disabled { opacity: 0.5; cursor: not-allowed; }

/* ---- Motion tracking indicator ---- */
.track-group {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}
.track-indicator {
  font-size: 13px;
  color: #39ff14;
  letter-spacing: 2px;
  text-transform: uppercase;
  animation: track-pulse 0.8s ease-in-out infinite;
}
@keyframes track-pulse {
  0%, 100% { opacity: 1; }
  50%       { opacity: 0.35; }
}
.track-stop-btn {
  background: #555;
  color: #ccc;
  font-size: 12px;
  padding: 6px 12px;
  border-radius: 10px;
  border: 2px solid #000;
  cursor: pointer;
  box-shadow: 0 3px 0 #000;
  transition: background 0.15s, transform 0.05s;
}
.track-stop-btn:active { transform: translateY(3px); box-shadow: 0 0 0 #000; }
.track-stop-btn:hover  { background: #e53935; color: #fff; }

/* ---- Watering bar ---- */
.watering-bar {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  margin: 10px 0 4px;
  flex-wrap: wrap;
}
.watering-label {
  font-size: 13px;
  color: #4fc3f7;
  letter-spacing: 2px;
  text-transform: uppercase;
  font-family: "Luckiest Guy", system-ui, sans-serif;
}
.watering-btns {
  display: flex;
  gap: 10px;
}
.water-btn {
  font-size: 14px;
  padding: 10px 20px;
  border-radius: 12px;
  border: 3px solid #000;
  cursor: pointer;
  box-shadow: 0 4px 0 #000;
  transition: background 0.15s, color 0.15s, transform 0.05s;
  font-family: "Luckiest Guy", system-ui, sans-serif;
  letter-spacing: 1px;
}
.water-btn:active { transform: translateY(4px); box-shadow: 0 0 0 #000; }
.water-btn:disabled { opacity: 0.4; cursor: not-allowed; }
.water-on-btn {
  background: #0288d1;
  color: #fff;
  box-shadow: 0 4px 0 #01579b;
}
.water-on-btn:active { box-shadow: 0 0 0 #01579b; }
.water-on-btn.running {
  background: #4fc3f7;
  color: #000;
  animation: water-pulse 1.4s ease-in-out infinite;
}
@keyframes water-pulse {
  0%, 100% { box-shadow: 0 4px 0 #01579b, 0 0 0px rgba(79,195,247,0); }
  50%       { box-shadow: 0 4px 0 #01579b, 0 0 14px rgba(79,195,247,0.8); }
}
.water-off-btn {
  background: #555;
  color: #aaa;
  box-shadow: 0 4px 0 #222;
}
.water-off-btn:hover:not(:disabled) { background: #e53935; color: #fff; }

.face-col {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}
.face-guard {
  position: relative;
  width: 84px;
  height: 84px;
  border-radius: 50%;
  background: radial-gradient(circle at 35% 35%, #5c6bc0, #1a237e);
  border: 4px solid #000;
  color: #fff;
  cursor: pointer;
  box-shadow: 0 6px 0 #0d1261, 0 0 20px rgba(92,107,192,0.5);
  transition: background 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  user-select: none;
}
.face-guard:active {
  box-shadow: 0 2px 0 #0d1261, 0 0 28px rgba(92,107,192,0.9);
}
/* state colours */
.face-guard[data-state="seeking"] {
  background: radial-gradient(circle at 35% 35%, #ffd740, #f57f17);
  box-shadow: 0 6px 0 #7a3e00, 0 0 20px rgba(255,215,64,0.5);
}
.face-guard[data-state="track"] {
  background: radial-gradient(circle at 35% 35%, #69f0ae, #1b5e20);
  box-shadow: 0 6px 0 #0a2e0f, 0 0 20px rgba(105,240,174,0.5);
  color: #000;
}
.face-guard[data-state="notfound"] {
  background: radial-gradient(circle at 35% 35%, #ff5252, #b71c1c);
  box-shadow: 0 6px 0 #7f0000, 0 0 20px rgba(255,82,82,0.5);
}
/* guard arc — blue tint, mirrors FIRE's orange arc */
.face-guard::before {
  content: "";
  position: absolute;
  inset: -8px;
  border-radius: 50%;
  border: 5px solid #4A90E2;
  border-bottom-color: transparent;
  border-left-color: transparent;
  transform: rotate(-45deg);
  pointer-events: none;
  box-shadow: 0 0 8px rgba(74,144,226,0.6);
  transition: border-color 0.2s, box-shadow 0.2s;
}
.face-guard[data-state="seeking"]::before {
  border-color: #ffdd00;
  border-bottom-color: transparent;
  border-left-color: transparent;
  box-shadow: 0 0 12px rgba(255,221,0,0.7);
}
.face-guard[data-state="track"]::before {
  border-color: #39ff14;
  border-bottom-color: transparent;
  border-left-color: transparent;
  box-shadow: 0 0 12px rgba(57,255,20,0.7);
}
.face-guard[data-state="notfound"]::before {
  border-color: #ff5252;
  border-bottom-color: transparent;
  border-left-color: transparent;
  box-shadow: 0 0 12px rgba(255,82,82,0.7);
}
.face-svg {
  width: 60%;
  height: 60%;
}
/* mouth variants — only one visible at a time */
.face-meh, .face-sad { display: none; }
.face-guard[data-state="seeking"] .face-smile,
.face-guard[data-state="seeking"] .face-sad   { display: none; }
.face-guard[data-state="seeking"] .face-meh   { display: block; }
.face-guard[data-state="notfound"] .face-smile,
.face-guard[data-state="notfound"] .face-meh  { display: none; }
.face-guard[data-state="notfound"] .face-sad  { display: block; }
/* scan arc only visible while seeking */
.face-scan { display: none; }
.face-guard[data-state="seeking"] .face-scan {
  display: block;
  transform-origin: 20px 20px;
  animation: face-spin 1s linear infinite;
}
@keyframes face-spin { to { transform: rotate(360deg); } }
/* seeking pulse — box-shadow only, no filter (filter creates compositing layer
   that breaks hit-testing on siblings in mobile WebKit) */
.face-guard[data-state="seeking"] {
  animation: face-seek-pulse 0.9s ease-in-out infinite;
}
@keyframes face-seek-pulse {
  0%,100% { box-shadow: 0 6px 0 #7a3e00, 0 0 4px  rgba(255,221,0,0.2); }
  50%      { box-shadow: 0 6px 0 #7a3e00, 0 0 20px rgba(255,221,0,0.9); }
}
.face-label {
  font-size: 10px;
  color: #4A90E2;
  letter-spacing: 2px;
  text-transform: uppercase;
  transition: color 0.2s;
}
.face-col:has([data-state="seeking"]) .face-label,
.face-guard[data-state="seeking"] ~ .face-label  { color: #ffdd00; }
.face-col:has([data-state="track"])   .face-label  { color: #39ff14; }
.face-col:has([data-state="notfound"]) .face-label { color: #ff5252; }

